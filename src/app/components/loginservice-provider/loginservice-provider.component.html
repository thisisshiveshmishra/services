<div class="container" id="container">

  <!-- ðŸ“ Register Form -->
  <div class="form-container sign-up-container">
    <form (ngSubmit)="onSubmit(registerForm)" #registerForm="ngForm" enctype="multipart/form-data">
      <h1>Register Here</h1>

      <input type="text" name="firstName" [(ngModel)]="form.firstName" placeholder="First Name" required />
      <div *ngIf="form.firstName && !namePattern.test(form.firstName)" class="text-danger">
        First name must contain only letters (2â€“30 chars).
      </div>

      <input type="text" name="lastName" [(ngModel)]="form.lastName" placeholder="Last Name" required />
      <div *ngIf="form.lastName && !namePattern.test(form.lastName)" class="text-danger">
        Last name must contain only letters (2â€“30 chars).
      </div>

      <div class="beside">
        <input type="text" name="mobileNumber" [(ngModel)]="form.mobileNumber" placeholder="Mobile Number" required />
        <div *ngIf="mobileError" class="text-danger">
          Invalid mobile number (must start with 6â€“9 and be 10 digits).
        </div>

        <select name="gender" [(ngModel)]="form.gender" required>
          <option value="" disabled selected>GENDER</option>
          <option value="Male">MALE</option>
          <option value="Female">FEMALE</option>
          <option value="Other">Other</option>
        </select>
        <div *ngIf="genderError" class="text-danger">
          Please select your gender.
        </div>
      </div>

      <input type="email" name="email" [(ngModel)]="form.email" placeholder="Email Address" required />
      <div *ngIf="form.email && !emailPattern.test(form.email)" class="text-danger">
        Invalid email format.
      </div>

      <input type="text" name="location" [(ngModel)]="form.location" placeholder="Location" required />
      <div *ngIf="locationError" class="text-danger">
        Location must be valid (letters, spaces, commas only).
      </div>

      <input type="text" name="category" [(ngModel)]="form.category" placeholder="Category" required />
      <div *ngIf="categoryError" class="text-danger">
        Category must contain only letters and spaces.
      </div>

      <textarea
        name="description"
        [(ngModel)]="form.description"
        placeholder="Describe your business / services"
        required
      ></textarea>
      <div *ngIf="descriptionError" class="text-danger">
        Description must be at least 10 characters.
      </div>

      <div class="password-container">
        <input
          [type]="showRegisterPassword ? 'text' : 'password'"
          name="password"
          [(ngModel)]="form.password"
          placeholder="Password"
          #pwd="ngModel"
          required
        />
        <span class="toggle-password" (click)="toggleRegisterPassword()">
          <i class="fa" [ngClass]="showRegisterPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
        </span>
      </div>

      <!-- Show error if empty -->
      <div *ngIf="pwd.invalid && pwd.touched" class="text-danger">
        Password is required.
      </div>

      <div *ngIf="form.password && !passwordPattern.test(form.password)" class="text-danger">
        Password must be 6+ chars with 1 uppercase, 1 number, 1 special symbol.
      </div>

      <div class="business-profile-upload">
        <label for="businessProfile">Business Profile Image</label>
        <input
          type="file"
          id="businessProfile"
          name="businessProfile"
          (change)="onFileSelected($event)"
          accept=".png, .jpeg, .jpg"
          required
        />
        <div *ngIf="fileError" class="text-danger">
          Only PNG or JPEG images under 5MB are allowed.
        </div>
      </div>

      <button type="submit">Register</button>
    </form>
  </div>

  <!-- ðŸ” Login Form -->
  <div class="form-container sign-in-container">
    <form (ngSubmit)="onLogin()">
      <h1>Log in</h1>
      <span>or use your account</span>

      <input type="email" placeholder="Email" [(ngModel)]="email" name="email" required />
      <div *ngIf="loginEmailError" class="text-danger">
        Invalid email format.
      </div>

      <div class="password-container">
        <input
          [type]="showLoginPassword ? 'text' : 'password'"
          placeholder="Password"
          [(ngModel)]="password"
          name="password"
          required
        />
        <span class="toggle-password" (click)="toggleLoginPassword()">
          <i class="fa" [ngClass]="showLoginPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
        </span>
      </div>

      <a href="/resetpassword">Forgot your password?</a>

      <button type="submit">Log In</button>
      <div class="text-danger mt-2">{{ message }}</div>
    </form>
  </div>

  <div class="overlay-container">
    <div class="overlay">
      <div class="overlay-panel overlay-left">
        <h1>Welcome Back!</h1>
        <p>To keep connected, please login with your personal info</p>
        <button class="ghost" id="signIn" (click)="toggleSignIn()">Sign In</button>
      </div>
      <div class="overlay-panel overlay-right">
        <h1>Hello, Friend!</h1>
        <p>Enter your personal details and start your journey with us</p>
        <button class="ghost" id="signUp" (click)="toggleSignUp()">Sign Up</button>
      </div>
    </div>
  </div>
</div>
