<!-- Feedback Block -->
<section id="feedback" class="contact-section bg-dark">
  <div id="map" class="bg-overlay"></div>
  <div class="container py-5">
    <div class="col-lg-8 col-md-6 col-sm-10 form-sec bg-white my-5 p-5 mx-auto">

      <!-- ❌ Cross button -->
      <button type="button" class="close-btn" (click)="closeForm()">×</button>

      <div *ngIf="showConfirmation" class="alert alert-success text-center" role="alert">
        ✅ Thank you! Your feedback has been submitted successfully.
      </div>

      <form [formGroup]="feedbackForm" (ngSubmit)="onSubmit()">
        <h2 class="mb-4">Give Us Feedback!</h2>

        <!-- Hidden userId field -->
        <input type="hidden" formControlName="userId">

        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <input class="form-control" formControlName="name" placeholder="Full Name" type="text">
              <small *ngIf="feedbackForm.get('name')?.invalid && feedbackForm.get('name')?.touched" class="text-danger">
                Name is required
              </small>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <input class="form-control" formControlName="contactNumber" placeholder="Contact Number" type="text">
              <small *ngIf="feedbackForm.get('contactNumber')?.invalid && feedbackForm.get('contactNumber')?.touched"
                class="text-danger">
                Valid 10-digit contact number is required
              </small>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <input class="form-control" formControlName="email" placeholder="Email Address" type="email">
              <small *ngIf="feedbackForm.get('email')?.invalid && feedbackForm.get('email')?.touched" class="text-danger">
                Valid email is required
              </small>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <input class="form-control" formControlName="location" placeholder="Enter Location" type="text">
              <small *ngIf="feedbackForm.get('location')?.invalid && feedbackForm.get('location')?.touched"
                class="text-danger">
                Location is required
              </small>
            </div>
          </div>
        </div>

        <!-- Category and Rating -->
        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <select class="form-control" formControlName="category" (change)="onCategoryChange($event)">
                <option value="">Select Category</option>
                <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
                <option value="Other">Other</option>
              </select>

              <input *ngIf="showCustomCategoryInput" type="text" formControlName="customCategory"
                class="form-control mt-2" placeholder="Enter custom category" />

              <small *ngIf="feedbackForm.get('category')?.invalid && feedbackForm.get('category')?.touched"
                class="text-danger">
                Category is required
              </small>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <select class="form-control" formControlName="rating">
                <option value="">Select Rating</option>
                <option *ngFor="let r of [1,2,3,4,5]" [value]="r">{{ r }} ★</option>
              </select>
              <small *ngIf="feedbackForm.get('rating')?.invalid && feedbackForm.get('rating')?.touched"
                class="text-danger">
                Rating is required
              </small>
            </div>
          </div>
        </div>

        <!-- Message -->
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">
              <textarea class="form-control" formControlName="message" placeholder="Enter your message here!" rows="4"></textarea>
              <small *ngIf="feedbackForm.get('message')?.invalid && feedbackForm.get('message')?.touched"
                class="text-danger">
                Message is required
              </small>
            </div>

            <div class="form-group text-center">
              <button type="submit" class="btn btn-primary btn-capsul px-4">Submit</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>

<!-- footer Block -->
<div class="copy-footer py-2" style="color: #B47F41;">
  <div class="container text-center">
    &copy;
    <a href="https://aideorttechnologies.com/" target="_blank" style="color: #B47F41; text-decoration: none;">
      Aideort Technologies PVT LTD.
    </a>
    <span id="year"></span>. All rights reserved. Created with <i class="fa fa-heart"></i>
  </div>
</div>
